<!doctype html>
<html lang="cs">
<head>
	<title>Skelet</title>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, minimal-ui">

	<script>
		var loadScriptAsync = function(src, cb) {
			var script = document.createElement("script");
			script.type = "text/javascript";
			script.async = true;
			script.onload = function() {
				if (typeof cb === "function") {
					cb();
				}
			};
			script.src = src;
			document.getElementsByTagName('head')[0].appendChild(script);
		};

		var loadScriptSync = function(src) {
			var req = new XMLHttpRequest();
			req.open("GET", src, false); // 'false': synchronous.
			req.send(null);

			if (req.status == 200) {
				var headElement = document.getElementsByTagName("head")[0];
				var script = document.createElement("script");

				script.type = "text/javascript";
				script.text = req.responseText;
				headElement.appendChild(script);
			}
		};

		var loader = function(newBrowserSrc, oldBrowserSrc, isAsync) {
			var newBrowser = false;
			var fn = isAsync ? loadScriptAsync : loadScriptSync;

			// lepsi test jak async
			if (typeof ("".padStart) === "function") {
				var firefox = "navigator" in window ? navigator.userAgent.match(/Firefox\/(.*)$/) : null;

				newBrowser = !firefox || (firefox && parseFloat(firefox[1]) >= 52);
			}

			if (newBrowser) {
				fn(newBrowserSrc);
			}
			else {
				if (isAsync) {
					fn("/dist/polyfills.js", function() {
						fn(oldBrowserSrc);
					});
				}
				else {
					fn("/dist/polyfills.js");
					fn(oldBrowserSrc);
				}
			}
		};

		loader("/dist/main-rollup.js", "/dist/main-babel.js", true);
	</script>
	<script src="/dist/test.js" type=""></script>
</head>
<body>
	<h1>Skelete test page</h1>
</body>
</html>
